@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model RentManagement.ViewModels.RegisterViewModel
@{
    ViewData["Title"] = Model.IsAdminRegistration ? "Create User" : "Register";
}

<div class="flex justify-center">
    <div class="w-full max-w-4xl">
        <div class="bg-white shadow-lg rounded-lg overflow-hidden">
            <div class="bg-blue-500 text-white px-6 py-4">
                <h2 class="text-2xl font-bold flex items-center">
                    <i class="fas fa-user-plus mr-3"></i>
                    @(Model.IsAdminRegistration ? "Create New User" : "Create Account")
                </h2>
            </div>
            <div class="p-6">
                <form asp-action="Register" method="post">
                    <div asp-validation-summary="ModelOnly" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" role="alert"></div>
                    <input type="hidden" asp-for="IsAdminRegistration" />

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label asp-for="FirstName" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user mr-1"></i>First Name
                            </label>
                            <input asp-for="FirstName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter first name" />
                            <span asp-validation-for="FirstName" class="text-red-500 text-sm"></span>
                        </div>
                        <div>
                            <label asp-for="LastName" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user mr-1"></i>Last Name
                            </label>
                            <input asp-for="LastName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter last name" />
                            <span asp-validation-for="LastName" class="text-red-500 text-sm"></span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div>
                            <label asp-for="Email" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-envelope mr-1"></i>Email
                            </label>
                            <input asp-for="Email" type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter email address" />
                            <span asp-validation-for="Email" class="text-red-500 text-sm"></span>
                        </div>
                        <div>
                            <label asp-for="Username" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-at mr-1"></i>Username
                            </label>
                            <input asp-for="Username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Choose username" />
                            <span asp-validation-for="Username" class="text-red-500 text-sm"></span>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div>
                            <label asp-for="PhoneNumber" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-phone mr-1"></i>Phone Number
                            </label>
                            <input asp-for="PhoneNumber" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter phone number" />
                            <span asp-validation-for="PhoneNumber" class="text-red-500 text-sm"></span>
                        </div>
                        <div>
                            <label asp-for="Department" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-building mr-1"></i>Department
                            </label>
                            <input asp-for="Department" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter department" />
                            <span asp-validation-for="Department" class="text-red-500 text-sm"></span>
                        </div>
                    </div>

                    @if (Model.IsAdminRegistration && User.IsInRole("Admin"))
                    {
                        <div class="mt-6">
                            <label asp-for="Role" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user-tag mr-1"></i>Role
                            </label>
                            <select asp-for="Role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" asp-items="Html.GetEnumSelectList<RentManagement.Models.UserRole>()">
                                <option value="">Select Role</option>
                            </select>
                            <span asp-validation-for="Role" class="text-red-500 text-sm"></span>
                        </div>
                    }

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div>
                            <label asp-for="Password" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-lock mr-1"></i>Password
                            </label>
                            <input asp-for="Password" type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter password" />
                            <span asp-validation-for="Password" class="text-red-500 text-sm"></span>
                            @if (Model.IsAdminRegistration)
                            {
                                <p class="text-gray-500 text-sm mt-1">Leave blank to generate a random password</p>
                            }
                            else
                            {
                                <p class="text-gray-500 text-sm mt-1">Must contain uppercase, lowercase, number, and special character</p>
                            }
                        </div>
                        <div>
                            <label asp-for="ConfirmPassword" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-lock mr-1"></i>Confirm Password
                            </label>
                            <input asp-for="ConfirmPassword" type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Confirm password" />
                            <span asp-validation-for="ConfirmPassword" class="text-red-500 text-sm"></span>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 mt-8">
                        @if (Model.IsAdminRegistration)
                        {
                            <a asp-controller="Admin" asp-action="UserManagement" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded text-center">
                                <i class="fas fa-arrow-left mr-2"></i>Back to Users
                            </a>
                        }
                        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            <i class="fas fa-user-plus mr-2"></i>@(Model.IsAdminRegistration ? "Create User" : "Register")
                        </button>
                    </div>
                </form>

                @if (!Model.IsAdminRegistration)
                {
                    <hr class="my-6">
                    <div class="text-center">
                        <p class="text-gray-600">Already have an account? <a asp-action="Login" class="text-blue-500 hover:text-blue-700 font-medium">Sign in here</a></p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}